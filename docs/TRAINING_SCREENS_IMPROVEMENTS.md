# Тренировки: улучшения и идеи

Обзор экранов вкладки «Тренировки» и предложения по доработке.

---

## Текущие экраны

| Вкладка | Экран | Назначение |
|---------|-------|------------|
| План | PlanOverviewScreen | Обзор плана, «Сегодня», «Следующая», блок от тренера |
| Обзор | ClimbingLogSummaryScreen | Сводка, сила (ранг), XP, streak, рекомендации, «Добавить тренировку» |
| Прогресс | ClimbingLogProgressScreen | Графики по трассам, статистика, история силы |
| История | ClimbingLogHistoryScreen | Список сессий лазания |
| Тестирование | ClimbingLogTestingScreen | Замеры: пальцы, щипок, подтягивания, ранг |

**Дополнительные экраны (из навигации):**
- PlanDayScreen — план на день, упражнения, растяжка, «Начать выполнение»
- ExerciseCompletionScreen — выполнение упражнений с подходами и таймером отдыха
- PlanSelectionScreen — создание/выбор плана
- PlanCalendarScreen — календарь плана
- ClimbingLogAddScreen — добавление/редактирование сессии лазания

---

## Улучшения по экранам

### PlanOverviewScreen (План)
- [x] Блок «От тренера» — рекомендация, время, нагрузка
- [x] Сохранение состояния при навигации (нет мелькания)
- [x] Ошибка сети вместо «Создать план»
- **Идеи:**
  - Кнопка «Очистить данные» — вынести в overflow-меню или сделать менее заметной (тестовая)
  - Скелетон/placeholder для блока тренера при первой загрузке
  - Swipe-to-refresh на карточках

### ClimbingLogSummaryScreen (Обзор)
- [x] Объединённая загрузка (нет мелькания блоков)
- [x] AutomaticKeepAliveClientMixin (нет перезагрузки при переключении вкладок)
- **Идеи:**
  - Связь с планом: если сегодня день по плану — показать «Сегодня по плану: X упражнений» и быстрый переход
  - Виджет «Последняя тренировка» (дата, что сделали, прогресс)
  - Короткие подсказки дня на основе recovery status
  - Прогресс-бар до следующего ранга силы (если частично есть)
  - При 0 сессий — кнопка «Пройти замер силы» вести в Тестирование

### PlanDayScreen (План на день)
- [x] «Уточнить на сегодня» (feeling, focus, время)
- [x] Комментарии тренера к упражнениям
- **Идеи:**
  - Предпросмотр растяжки в свёрнутом виде с возможностью развернуть
  - Анимация при «Отметить выполненным» (confetti / checkmark)
  - Быстрая оценка после завершения: «Как прошло?» 1–5 для адаптации будущих планов
  - Кнопка «Отложить» — перенести сессию на завтра (если бэкенд поддерживает)

### ExerciseCompletionScreen (Выполнение упражнений)
- [x] Таймер отдыха между подходами
- [x] Комментарии тренера
- **Идеи:**
  - Сброс таймера при сворачивании приложения (сохранять `restSecondsRemaining` в isolate/Background)
  - Звук или вибрация по окончании отдыха
  - Режим «только план» без лишних блоков (уже есть через workoutExerciseEntries)
  - Прогресс «X из Y упражнений» в AppBar
  - Пропуск упражнения (зачеркнуть, не удалять)
  - Связь с планом: после всех подходов — авто-переход к следующему без возврата на план

### ClimbingLogProgressScreen (Прогресс)
- **Идеи:**
  - Фильтр по периоду (2 недели / 1 месяц / 3 месяца)
  - Сравнение «эта неделя vs прошлая»
  - Цель по трассам (например: 10 трасс 6b за месяц)
  - Export в CSV / скриншот графика
  - AutomaticKeepAliveClientMixin (как у Обзора)

### ClimbingLogHistoryScreen (История)
- **Идеи:**
  - Группировка по месяцам
  - Поиск по залу / дате
  - Фильтр по типу (лазание / ОФП по плану — когда бэкенд отдаёт)
  - Swipe для удаления с подтверждением
  - Pull-to-refresh
  - AutomaticKeepAliveClientMixin

### ClimbingLogAddScreen (Добавить тренировку)
- **Идеи:**
  - Быстрый ввод «N трасс 6a» без перебора грейдов
  - Шаблоны: «Типичная тренировка» (сохранённые комбинации)
  - Заполнение даты по умолчанию — последний раз использованный зал
  - Подсказка «На этой неделе вы ещё не лазали» при пустой истории

### ClimbingLogTestingScreen (Тестирование)
- **Идеи:**
  - Подсказка «Рекомендуем замериться раз в 2–4 недели»
  - Напоминания (локальные) о следующем замере
  - История замеров в виде мини-графика на экране
  - Сравнение с предыдущим замером сразу после сохранения

---

## Идеи на уровне продукта

### 1. Единая лента активности
- Объединить «История» и «Прогресс» в одну ленту: лазание, ОФП по плану, замеры силы.
- Фильтры: всё / только лазание / только ОФП.

### 2. Напоминания
- Локальные push: «Сегодня тренировка по плану», «Не забудь замерить силу».
- Настраиваемое время.

### 3. Цели
- Цели по трассам, по дням тренировок, по силе.
- Прогресс-бар к цели на главном экране.

### 4. Социальное
- Делиться результатом (скриншот ранга, графика).
- Соревнования по серии дней (streak) среди друзей.

### 5. WorkoutGenerateScreen
- Сейчас не используется из основного флоу.
- Варианты: вернуть в Обзор как «Сгенерировать тренировку на сегодня» ИЛИ убрать, если всё идёт через план.

### 6. Синхронизация плана и лазания
- «Вчера лазал 20 трасс — сегодня лёгкая ОФП» — учёт в рекомендациях.
- Пока требует доработки бэкенда.

---

## Быстрые победы (низкий порог)

1. **AutomaticKeepAliveClientMixin** для Прогресс, История, Тестирование — как в Обзоре.
2. **Pull-to-refresh** везде, где есть загрузка списков.
3. **Исправление текста** в empty state Обзора: «во вкладке „Тренировка“» → «кнопкой „Добавить тренировку“».
4. **Ссылка «Пройти замер»** в empty state → переход на вкладку Тестирование.
5. **Группировка по месяцам** в Истории.
