# Backend: API статистики соревнования

**Один файл — всё необходимое для реализации.**

---

## Задача

В мобильном приложении есть раздел «Детали соревнования» с вкладкой «Статистика». Нужен эндпоинт, который возвращает агрегированную статистику по соревнованию в одном запросе.

---

## Эндпоинт

```
GET /api/event/{event_id}/statistics
```

- `{event_id}` — ID соревнования
- **Headers:** `Accept: application/json`, опционально `Authorization: Bearer {token}`

---

## Ответ 200 OK

```json
{
  "participants_total": 87,
  "participants_male": 52,
  "participants_female": 35,
  "routes_total": 15,
  "flashes_total": 124,
  "redpoints_total": 89,
  "zones_total": 45
}
```

| Поле | Тип | Описание |
|------|-----|----------|
| `participants_total` | int | Общее количество участников |
| `participants_male` | int | Количество мужчин |
| `participants_female` | int | Количество женщин |
| `routes_total` | int | Общее количество трасс |
| `flashes_total` | int | Сумма флешей по всем участникам |
| `redpoints_total` | int | Сумма редпоинтов |
| `zones_total` | int | Сумма зон |

При отсутствии данных — возвращать `0`.

---

## Источники данных

1. **Участники** — таблица участников события. Поле `gender`: `male`, `female`, `Мужской`, `Женский` и т.п. — привести к male/female.
2. **Трассы** — трассы события (квалификация + полуфинал + финал по структуре события).
3. **Результаты** — таблица результатов с полем `attempt`:
   - `0` — X (не засчитывается)
   - `1` — Flash
   - `2` — Redpoint
   - `3` — Zone

---

## Ошибки

- `404` — событие не найдено
- `500` — внутренняя ошибка

Тело ошибки: `{"message": "Событие не найдено"}`
