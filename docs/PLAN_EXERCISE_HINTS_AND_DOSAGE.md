# Подсказки к упражнениям плана — для фронта

Каждое упражнение в ответе `GET /api/climbing-logs/plans/{id}/day` может содержать:
- **`dosage`** — готовый для отображения текст дозировки («3 подхода по 12 повторений», «5 подходов по 7–10 сек» и т.п.);
- **`hint`** — развёрнутое описание: что это за упражнение, как выполнять, на что обратить внимание.

---

## Формат упражнения

```json
{
  "exercise_id": "plan_0_a1b2c3d4",
  "name": "Приседания",
  "sets": 3,
  "reps": "12",
  "dosage": "3 подхода по 12 повторений",
  "comment": "Спина прямая, таз назад",
  "hint": "Базовое упражнение для ног и ягодиц. Ноги на ширине плеч, опускайтесь вниз, сгибая колени, как будто садитесь на стул. Колени не выходят за носки, спина прямая, таз отводится назад. Поднимайтесь за счёт толчка пятками."
}
```

| Поле | Тип | Описание |
|------|-----|----------|
| `exercise_id` | string | Идентификатор для exercise-completions |
| `name` | string | Название упражнения |
| `sets` | int | Количество **подходов** |
| `reps` | string | Сырое значение: повторения, время или текст («12», «20-30 сек», «8 на ногу», «макс (но не отказ)» и т.д.) |
| `dosage` | string | Готовый текст для показа на фронте (напр. «3 подхода по 12 повторений») |
| `comment` | string \| null | Краткое замечание (опционально) |
| `hint` | string \| null | Полное описание: что это, как делать, на что смотреть |

---

## Поля sets, reps и dosage — что показывать

Числа `sets` и `reps` при прямом показе на UI часто непонятны: «3» и «12» без контекста не говорят о подходах и повторениях.

**Рекомендация:** использовать поле **`dosage`**, если оно есть. Это строка, уже подготовленная для отображения, например:

- `3 подхода по 12 повторений`
- `5 подходов по 7–10 сек`
- `3 подхода по 8 повторений на ногу`
- `1 подход 20–30 мин`
- `3 подхода до максимума (без отказа)`

Если `dosage` отсутствует (старые данные), можно собрать текст из `sets` и `reps`:

- `sets` — всегда число **подходов**
- `reps` — строка, может означать: повторения («12»), время («20-30 сек»), «на ногу», «на руку», «на сторону», «макс», «в каждую сторону» и т.д.; при необходимости добавлять единицы измерения (например, «12 повторений», если в `reps` только «12»)

---

## Рекомендации по отображению

1. **Карточка упражнения**
   - Основной блок: `name`, **`dosage`** (если есть), иначе `sets` + `reps`, `comment` (если есть)
   - Дозировку показывать как `dosage`, чтобы избежать непонятных чисел «3» и «12»
   - Кнопка или иконка «Подсказка» / «?» — по нажатию показывать `hint` в модальном окне, тултипе или раскрывающемся блоке

2. **Экран упражнения**
   - Верх: название, **`dosage`** (или собранный текст из `sets` + `reps`)
   - Ниже: `hint` — можно показывать сразу как текст-инструкцию
   - Альтернатива: сворачиваемый блок «Как выполнять» с `hint`

3. **Доступность**
   - Поле `dosage` может отсутствовать у старых планов — в этом случае собирать текст из `sets` и `reps` с подписями («подходов», «повторений» и т.д.)
   - Поле `hint` может отсутствовать у части упражнений (например, у растяжки) — проверять наличие перед показом
   - Если `hint` нет — не показывать блок подсказки

---

## Растяжка (stretching)

Структура растяжки:

```json
{
  "zone": "Плечи",
  "exercises": ["Замок за спиной", "Растяжка предплечий (ладонью вверх/вниз)"]
}
```

У элементов в `exercises` пока нет поля `hint` — это просто строки с названиями. Подсказки по растяжке можно добавлять по запросу.

---

## Реализация на фронте (Flutter)

- **PlanDayExercise** (`lib/models/PlanModels.dart`): `exercise_id`, `dosage`, `hint`, геттер `dosageDisplay`
- **WorkoutBlockExercise** (`lib/models/Workout.dart`): `dosage`, `hint`
- **CatalogExercise** (`lib/services/StrengthTestApiService.dart`): `dosage`, `hint`, геттер `dosageDisplay`
- **PlanDayScreen** / **ExerciseCompletionScreen**: вывод `dosageDisplay`, кнопка «Как выполнять» → модальное окно с `hint`
