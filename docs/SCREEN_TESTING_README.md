# Экран «Тестирование» — как работает и зачем таймер отдыха

## Где хранятся данные

**Сейчас:** вес и замеры сохраняются **локально** на устройстве (SharedPreferences). Бэкенд не используется.

**История замеров:** при нажатии «Сохранить замер» или «Сгенерировать план» текущий замер добавляется в локальную историю. При следующем открытии экрана показывается карточка «В прошлый раз (дата)» с результатами предыдущего замера.

**После интеграции бэкенда** (см. `BACKEND_API_FULL_SPEC.md`) — синхронизация между устройствами, полная история на сервере.

---

## Назначение экрана

Экран «Тестирование» — это модуль **замеров и тестирования силы** для скалолазания. Он позволяет пользователю:

1. Сохранять **вес тела** — базовую переменную для всех расчётов относительной силы.
2. Вносить результаты **биометрических тестов**:
   - **Изометрическая тяга пальцами** (Half-Crimp / Open, левая/правая рука)
   - **Сила щипка** (блок 40/60/80 мм)
   - **Тяговая сила** (подтягивания с доп. весом, 1RM/5RM)
   - **Lock-off 90°** (удержание в секундах)
3. Получать **ранг** (Climbing Archetypes) и **ачивки** на основе этих данных.
4. Запускать **генератор персонализированного плана** тренировок.

---

## Как работает экран

### 1. Вес тела
Хранится локально (SharedPreferences). Используется для расчёта % от веса:
- **Пальцы:** `вес_кг / вес_тела * 100`
- **Щипок:** `вес_кг / вес_тела * 100`
- **Тяга:** `(вес_тела + доп_вес) / вес_тела * 100` (1RM)

### 2. Система рангов (Strength Tiers)
Среднее % относительной силы по заполненным тестам даёт ранг:
- < 30% — Grasshopper (Кузнечик)
- 30–50% — Stone Gecko (Геккон)
- 50–70% — Mountain Lynx (Рысь)
- 70–90% — Gravity Defier (Атлант)
- > 90% — Apex Predator (Вершина)

### 3. Ачивки (Трофеи)
Открываются при достижении порогов:
- **Клешни Краба** — щипок ≥ 40% BW
- **Стальной КРИМП** — тяга 20 мм ≥ 60% BW
- **Тягач** — подтягивание с +50% BW
- **Баланс Силы** — асимметрия < 3%
- **Железный Блок** — Lock-off ≥ 30 сек

### 4. Генератор плана
Кнопка «Сгенерировать план» анализирует слабое звено и показывает:
- Coach Tip (рекомендация)
- Radar Chart (профиль vs эталон 7b)
- Список упражнений с параметрами

---

## Зачем таймер отдыха (180 секунд)

При выполнении силовых тестов (особенно максимальных висов и тяги) между попытками нужен **полный отдых**, иначе:
- мышцы не восстанавливаются;
- результаты занижаются;
- растёт риск травм (усталость → техника ломается).

**180 секунд (3 минуты)** — общепринятый интервал отдыха между тяжёлыми силовыми попытками в протоколах типа Max Hangs, 3-5-7 и т.п.

### Когда запускается таймер

Таймер стартует при:
- смене типа хвата (Half-Crimp / Open);
- смене ширины блока (40/60/80 мм);
- вводе/изменении значений в полях тестов.

### Что делает пользователь

1. Вносит результат (например, тяга левой рукой 25 кг).
2. Видит таймер «Отдых: 2:59».
3. Ждёт 3 минуты перед следующей попыткой.
4. Прогресс-бар показывает оставшееся время.

Таким образом, таймер напоминает о паузе и снижает вероятность слишком частых попыток, которые искажают замеры и увеличивают риск травм.
